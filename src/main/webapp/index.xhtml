<ui:composition template="template.xhtml"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui" >
  
  <ui:define name="content">
        <section id="geral">
          	<p:layoutUnit position="center" id="conteudo">
          		<div class="container-fluid offset1 span12">
	          		<h:form id="form">  
	  
					    <p:growl id="messages" showDetail="true" />
					    
					    <div class="container-fluid offset1 span12">
						    <p:schedule id="schedule" value="#{reservaSalaController.eventModel}" widgetVar="myschedule">  
						        <p:ajax event="dateSelect" listener="#{reservaSalaController.onDateSelect}" update="eventDetails" oncomplete="eventDialog.show();eventoDialog.hide();" />  
						        <p:ajax event="eventSelect" listener="#{reservaSalaController.onEventSelect}" update="eventoDetails" oncomplete="eventoDialog.show();eventDialog.hide();" />  
						        <p:ajax event="eventMove" listener="#{reservaSalaController.onEventMove}" update="messages" /> 
						        <p:ajax event="eventResize" listener="#{reservaSalaController.onEventResize}" update="messages" />  
						    </p:schedule>  
					  	</div>
					  	
					  	<div class="container-fluid span8 reservaDialogo">
						  	<p:dialog widgetVar="eventDialog" header="Fazer reserva de sala" showEffect="clip" hideEffect="clip">  
						        <h:panelGrid id="eventDetails" columns="3">  
						        
									<p:outputLabel for="sala">Sala</p:outputLabel>
									<p:selectOneMenu style="margin-bottom:2px;" id="sala" value="#{reservaSalaController.sala_id}" required="true" title="Sala" requiredMessage="O campo sala é Obrigatório">  
							            <f:selectItems value="#{reservaSalaController.salas}" var="sala" itemLabel="#{sala.nome}" itemValue="#{sala.id}"/>
							        </p:selectOneMenu>
							        <p:outputLabel></p:outputLabel>
							        
									<p:outputLabel for="dInicio">Data de Inicio: </p:outputLabel>
									<h:outputText id="dInicio" value="#{reservaSalaController.reserva.dataInicio}" locale="pt_Br" />
									<p:outputLabel></p:outputLabel>
									
									<p:outputLabel for="dTermino">Data de Término</p:outputLabel>
									<p:calendar id="dTermino" value="#{reservaSalaController.reserva.dataFim}"  locale="pt_BR" pattern="dd/MM/yyyy"/>
									<p:outputLabel>Só preencher caso seja mais de dia.</p:outputLabel>
									
									<p:outputLabel for="hInicio">Horário Inicio</p:outputLabel>
									<p:calendar id="hInicio" value="#{reservaSalaController.reserva.horarioInicio}" pattern="HH:mm" timeOnly="true" required="true"/>
									<p:outputLabel></p:outputLabel>
									
									<p:outputLabel for="hTermino">Horário de Término</p:outputLabel>
									<p:calendar id="hTermino" value="#{reservaSalaController.reserva.horarioTermino}" pattern="HH:mm" timeOnly="true" required="true"/>
									<p:outputLabel></p:outputLabel>
									
									<p:outputLabel for="email">Email</p:outputLabel>
									<p:inputText id="email" value="#{reservaSalaController.reserva.email}" required="true" title="Email" requiredMessage="O campo Email é Obrigatório"  validatorMessage="Email inválido">
										<f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
									</p:inputText>
									<h:outputText styleClass="info" value="Preferencialmente, email da UFBA"/>
									
									<p:outputLabel for="telefone">Telefone</p:outputLabel>
									<p:inputMask id="telefone" value="#{reservaSalaController.reserva.telefone}" title="Telefone" mask="(99)9999-9999."/>
									<p:outputLabel></p:outputLabel>
									
									<p:outputLabel for="responsavel">Responsável</p:outputLabel>
									<p:inputText id="responsavel" value="#{reservaSalaController.reserva.responsavel}" required="true" title="Responsavel" requiredMessage="O campo Responsável é Obrigatório"/>
									<p:outputLabel></p:outputLabel>
									
									<p:outputLabel for="reservado_para">Reservado para</p:outputLabel>
									<p:inputTextarea id="reservado_para" rows="3" cols="60" counter="counter" maxlength="256" counterTemplate="{0} faltam caracteres." autoResize="true" value="#{reservaSalaController.reserva.reservadoPara}" title="Reservado Para"/>
									<h:outputText id="counter" styleClass="info" />  
									
									<p:outputLabel for="privado">Evento privado: </p:outputLabel>
									<p:selectOneRadio id="privado" value="#{reservaSalaController.reserva.eventoPrivado}">  
							            <f:selectItem itemLabel="Sim" itemValue="true"/>  
							            <f:selectItem itemLabel="Não" itemValue="false" />    
							        </p:selectOneRadio>
									<p:outputLabel></p:outputLabel>
									
									<p:outputLabel for="obs">Observação</p:outputLabel>
									<p:inputTextarea id="obs" rows="3" cols="60" counter="contObs" maxlength="256" counterTemplate="{0} faltam caracteres." autoResize="true" value="#{reservaSalaController.reserva.observacao}" title="Observação"/>
									<h:outputText id="contObs" styleClass="info" />
								</h:panelGrid>
						        
								<p:separator style="width:100%;height:1px" />
								
								<div style="text-align:center;">
							        <p:commandButton id="addButton" value="Salvar" actionListener="#{reservaSalaController.addEvent()}" oncomplete="myschedule.update();eventDialog.hide();"/>
						            <p:commandButton type="reset" value="Limpar" />
				            	</div>  
						          
						    </p:dialog>  
					  	</div>
					  	
					  	<div class="container-fluid span8 reservaDialogo">
						  	<p:dialog widgetVar="eventoDialog" header="Reserva de Sala" showEffect="clip" hideEffect="clip">  
						        <h:panelGrid id="eventoDetails" columns="2" class="eventoDetails">  
						        
									<p:outputLabel for="sala_id"><strong>Sala: </strong></p:outputLabel>
									<h:outputText id="sala_id" value="#{reservaSalaController.selecionado.sala.id}" />
							        
									<p:outputLabel for="dInicio_"><strong>Data de Inicio: </strong></p:outputLabel>
									<h:outputText id="dInicio_" value="#{reservaSalaController.selecionado.dataInicio}" locale="pt_Br" />
									
									<p:outputLabel for="dTermino_"><strong>Data de Término: </strong></p:outputLabel>
									<h:outputText id="dTermino_" value="#{reservaSalaController.selecionado.dataFim}" />
									
									<p:outputLabel for="hInicio_"><strong>Horário Inicio: </strong></p:outputLabel>
									<h:outputText id="hInicio_" value="#{reservaSalaController.selecionado.horarioInicio}"/>
									
									<p:outputLabel for="hTermino_"><strong>Horário de Término: </strong></p:outputLabel>
									<h:outputText id="hTermino_" value="#{reservaSalaController.selecionado.horarioTermino}"/>
									
									<p:outputLabel for="email_"><strong>Email: </strong></p:outputLabel>
									<h:outputText id="email_" value="#{reservaSalaController.selecionado.email}"/>
									
									<p:outputLabel for="telefone_"><strong>Telefone: </strong></p:outputLabel>
									<h:outputText id="telefone_" value="#{reservaSalaController.selecionado.telefone}"/>
									
									<p:outputLabel for="responsavel_"><strong>Responsável: </strong></p:outputLabel>
									<h:outputText id="responsavel_" value="#{reservaSalaController.selecionado.responsavel}" title="Responsavel"/>
									
									<p:outputLabel for="reservado_para_"><strong>Reservado para: </strong></p:outputLabel>
									<h:outputText id="reservado_para_" value="#{reservaSalaController.selecionado.reservadoPara}"/>
									
									<p:outputLabel for="privado_" ><strong>Evento privado: </strong></p:outputLabel>
									<h:outputText id="privado_" value="#{(reservaSalaController.selecionado.eventoPrivado) ? 'Sim' : 'Não'}"/>
									
									<p:outputLabel for="obs_"><strong>Observação: </strong></p:outputLabel>
									<h:outputText id="obs_" value="#{reservaSalaController.selecionado.observacao}"/>
									  
						        </h:panelGrid>
						        
								<p:separator style="width:100%;height:1px" />
							    
							    <div style="text-align:center;">
						    		<p:commandButton id="status_true"  styleClass="btn btn-primary" value="Aceitar"  actionListener="#{reservaSalaController.statusReserva(1)}" oncomplete="myschedule.update();eventoDialog.hide();"/>
						            <p:commandButton id="status_false" styleClass="btn btn-primary" value="Rejeitar" actionListener="#{reservaSalaController.statusReserva(2)}" oncomplete="myschedule.update();eventoDialog.hide();"/>
				            	</div>
								
						    </p:dialog>  
					  	</div>
					  	
					</h:form>
       			</div>
       		</p:layoutUnit>
        </section>
  </ui:define>
</ui:composition>